<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="canonical" href="{{ site.url }}{{ page.url }}"/>

  {% assign page.keywords = page.tags %}

  {% include meta.html %}
  {% include favicon.html %}
  {% include style.html %}
  {% include libs.html %}
</head>

<body>
  <div>
    <article class="one-column">
      <header class="paper">
        <h1>{{ page.title }}</h1>

        <p class="description">{{ page.description }}</p>

        {% include post_time.html post=page %}
      </header>

      <div>
        {{ content }}
      </div>
    </article>

    {% assign hasRelated = false %}
    {% for post in site.posts %}
      {% for tag in post.tags %}
        {% for myTag in page.tags %}
          {% if tag == myTag and page.id != post.id %}
            {% assign hasRelated = true %}
          {% endif %}
        {% endfor %}
      {% endfor %}
    {% endfor %}

    {% if hasRelated == true %}
      <aside class="related-posts one-column">
        <div class="related-posts__title">Related posts</div>

        {% for post in site.posts %}
          {% assign isRelated = false %}
          {% for tag in post.tags %}
            {% for myTag in page.tags %}
              {% if tag == myTag and page.id != post.id %}
                {% assign isRelated = true %}
              {% endif %}
            {% endfor %}
          {% endfor %}

          {% if isRelated == true %}
             {% include post_box.html post=post %}
          {% endif %}
        {% endfor %}
      </aside>
    {% endif %}
  <div>

  <nav>
    <a class="nav__link" href="/" tabindex="-1" aria-label="Home">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="currentColor"><path d="M580-120q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm0-80q17 0 28.5-11.5T620-240q0-17-11.5-28.5T580-280q-17 0-28.5 11.5T540-240q0 17 11.5 28.5T580-200Zm80-200q-92 0-156-64t-64-156q0-92 64-156t156-64q92 0 156 64t64 156q0 92-64 156t-156 64Zm0-80q59 0 99.5-40.5T800-620q0-59-40.5-99.5T660-760q-59 0-99.5 40.5T520-620q0 59 40.5 99.5T660-480ZM280-240q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T360-400q0-33-23.5-56.5T280-480q-33 0-56.5 23.5T200-400q0 33 23.5 56.5T280-320Zm300 80Zm80-380ZM280-400Z"/></svg>
    </a>
  </nav>
</body>
</html>
